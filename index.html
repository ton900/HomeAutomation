<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<title>Cloud Admin | Buttons & Icons</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
	<meta name="description" content="">
	<meta name="author" content="">
    <script src="jquery-1.11.3.min.js" type="text/javascript"></script>
	<script src="mqttws31.js" type="text/javascript"></script>
	<script type="text/javascript">
  $(document).ready(function(){
  // Create a client instance
  client = new Paho.MQTT.Client("m11.cloudmqtt.com", 30300,"web_" + parseInt(Math.random() * 100, 10)); 
  //Example client = new Paho.MQTT.Client("m11.cloudmqtt.com", 30300, "web_" + parseInt(Math.random() * 100, 10));

  // set callback handlers
  client.onConnectionLost = onConnectionLost;
  client.onMessageArrived = onMessageArrived;
  var options = {
    useSSL: true,
    userName: "nbnowelb",
    password: "uFXRKOFSX2An",
    onSuccess:onConnect,
    onFailure:doFail
  }

  // connect the client
  client.connect(options);

  // called when the client connects
  function onConnect() {
	console.log("onConnect");
    client.subscribe("bedroom/switch/light");
  }

  function doFail(e){
    console.log(e);
  }

  // called when the client loses its connection
  function onConnectionLost(responseObject) {
    if (responseObject.errorCode !== 0) {
      console.log("onConnectionLost:"+responseObject.errorMessage);
    }
  }

  // called when a message arrives
  function onMessageArrived(message) {
    console.log("onMessageArrived:"+message.payloadString);
	//alert(message.payloadString);
	if(message.payloadString == 0)
	{
		$('input[name="f1"]').bootstrapSwitch('state', false, true);
		$(".bootstrap-switch-id-f1").find(".bootstrap-switch-label").html("<i class='fa fa-lightbulb-o fa-lg'></i>");
	}
	else
	{
		$('input[name="f1"]').bootstrapSwitch('state', true, true);
		$(".bootstrap-switch-id-f1").find(".bootstrap-switch-label").html("<i class='fa fa-lightbulb-o fa-lg text-warning' style='text-shadow: 0 -5px 5px yellow;'></i>");
	}
  }  
});
</script>

	<link rel="stylesheet" type="text/css" href="cloud-admin.css" >
	<link rel="stylesheet" type="text/css"  href="default.css" id="skin-switcher" >
	<link rel="stylesheet" type="text/css"  href="responsive.css" >
	<link href="font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="bootstrap-switch.css" rel="stylesheet">
</head>
<body>
	<header class="navbar clearfix" id="header">
		<div class="container">
				<div class="navbar-brand">
					<a href="index.html">
						
					</a>
					<div class="visible-xs">
						<a href="#" class="team-status-toggle switcher btn dropdown-toggle">
							<i class="fa fa-users"></i>
						</a>
					</div>
					<!-- /TEAM STATUS FOR MOBILE -->
					<!-- SIDEBAR COLLAPSE -->
					<div id="sidebar-collapse" class="sidebar-collapse btn">
						<i class="fa fa-bars" 
							data-icon1="fa fa-bars" 
							data-icon2="fa fa-bars" ></i>
					</div>
					<!-- /SIDEBAR COLLAPSE -->
				</div>
				<!-- NAVBAR LEFT -->
				<ul class="nav navbar-nav pull-left hidden-xs" id="navbar-left">
    
			
                    <li class="dropdown">
						<a href="#" class="team-status-toggle dropdown-toggle tip-bottom" data-toggle="tooltip" title="Toggle Team View">
							<i class="fa fa-users"></i>
							<span class="name">Setting</span>
							<i class="fa fa-angle-down"></i>
						</a>
					</li>
              
					
				</ul>
				<!-- /NAVBAR LEFT -->
				<!-- BEGIN TOP NAVIGATION MENU -->					
				
				<!-- END TOP NAVIGATION MENU -->
		</div>
		
		<!-- TEAM STATUS -->
		<div class="container team-status" id="team-status">
		  <div id="scrollbar">
			<div class="handle">
			</div>
		  </div>
		  <div id="teamslider">
			  <ul class="team-list">
				<li>
					<span class="status">		
                    test
				    </span>
				</li>
	
			  </ul>
			</div>
		  </div>
		<!-- /TEAM STATUS -->
	</header>
	<!--/HEADER -->
	
	<!-- PAGE -->
	<section id="page">
				<!-- SIDEBAR -->
				<div id="sidebar" class="sidebar">
					<div class="sidebar-menu nav-collapse">
						<!-- SIDEBAR MENU -->
						<ul>
							<li>
								<a href="index.html">
								<i class="fa fa-tachometer fa-fw"></i> <span class="menu-text">Dashboard</span>
								</a>					
							</li>
							<li class="has-sub active">
								<a href="javascript:;" class="">
								<i class="fa fa-bookmark-o"></i> <span class="menu-text">UI Features</span>
								<span class="arrow open"></span>
								<span class="selected"></span>
								</a>
								<ul class="sub">
									<li><a class="" href="elements.html"><span class="sub-menu-text">ชั้น 1</span></a></li>
                                    <li><a class="" href="notifications.html"><span class="sub-menu-text">ชั้น 2</span></a></li>
								</ul>
							</li>
                       
						</ul>
						<!-- /SIDEBAR MENU -->
					</div>
				</div>
				<!-- /SIDEBAR -->
		<div id="main-content">
			<!-- SAMPLE BOX CONFIGURATION MODAL FORM-->
			<div class="modal fade" id="box-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
				  <div class="modal-content">
					<div class="modal-header">
					  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					  <h4 class="modal-title">Box Settings</h4>
					</div>
					<div class="modal-body">
					  Here goes box setting content.
					</div>
					<div class="modal-footer">
					  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					  <button type="button" class="btn btn-primary">Save changes</button>
					</div>
				  </div>
				</div>
			  </div>
			<!-- /SAMPLE BOX CONFIGURATION MODAL FORM-->
			<div class="container">
				<div class="row">
					<div id="content" class="col-lg-12">
						<!-- 5TH ROW -->
						<div class="separator"></div>
						<div class="row">
							<div class="col-md-6">
								<!-- BADGES -->
								<div class="box border">
									<div class="box-title">
										<h4><i class="fa fa-arrows-h"></i>หน้าบ้าน</h4>
										<div class="tools">
											<a href="#box-config" data-toggle="modal" class="config">
												<i class="fa fa-cog"></i>
											</a>
											<a href="javascript:;" class="reload">
												<i class="fa fa-refresh"></i>
											</a>
											<a href="javascript:;" class="collapse">
												<i class="fa fa-chevron-up"></i>
											</a>
											<a href="javascript:;" class="remove">
												<i class="fa fa-times"></i>
											</a>
										</div>
									</div>
									<div class="box-body big">
										<div class="rows btn-toolbar">
                                            <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หน้าบ้าน 1</div>
                                                <input id="f1" class="col-lg-12  col-md-7 col-sm-12 col-xs-7" type="checkbox" 
                                                name="f1" floor="floor1" room="livingroom" io="light1"
                                                checked data-on-text="เปิด" data-off-text="ปิด"  
                                                data-label-text="<i class='fa fa-lightbulb-o fa-lg text-warning' style='text-shadow: 0 -5px 5px yellow;'></i>"
                                                >
                                            </div>

											<div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12 hidden-lg hidden-sm">&nbsp;</div>
                                            
                                            <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หน้าบ้าน 2</div>
                                                <input class="col-lg-12  col-md-7 col-sm-12 col-xs-7" type="checkbox" 
                                                name="f2" floor="floor1" room="livingroom" io="light2"
                                                checked data-on-text="เปิด" data-off-text="ปิด"  
                                                data-label-text="<i class='fa fa-lightbulb-o fa-lg '></i>"
                                                >
                                            </div>
                                            
                                          <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12">&nbsp;</div>
                                            
                                           <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หน้าบ้าน 3</div>
                                                <input  class="col-lg-12  col-md-7 col-sm-12 col-xs-7" type="checkbox" name="f3" checked data-on-text="เปิด" floor="floor1" room="garage" io="light1">
                                            </div>
                                            
                                            <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12 hidden-lg hidden-sm">&nbsp;</div>
                                            
                                            <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หน้าบ้าน 4</div>
                                                <input  class="col-lg-12  col-md-7 col-sm-12 col-xs-7" type="checkbox" name="f4" checked data-on-text="เปิด" floor="floor1" room="livingroom" io="plug1">
                                            </div>
                                            
											<!-- 
                                           <div class="row col-lg-12 hidden-lg hidden-sm">&nbsp;</div>
                                            
                                           <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หน้าบ้าน 4</div>
                                                <div class="col-lg-12  col-md-7 col-sm-12 col-xs-7">
                                                    <input type="checkbox" name="my-checkbox" checked>
                                                </div>   
                                            </div>-->
                                            
                                        </div>
									</div>
								</div>
								<!-- /BADGES -->
							</div>
							<div class="col-md-6">
								<!-- BADGES -->
								<div class="box border">
									<div class="box-title">
										<h4><i class="fa fa-arrows-h"></i>หลังบ้าน</h4>
										<div class="tools">
											<a href="#box-config" data-toggle="modal" class="config">
												<i class="fa fa-cog"></i>
											</a>
											<a href="javascript:;" class="reload">
												<i class="fa fa-refresh"></i>
											</a>
											<a href="javascript:;" class="collapse">
												<i class="fa fa-chevron-up"></i>
											</a>
											<a href="javascript:;" class="remove">
												<i class="fa fa-times"></i>
											</a>
										</div>
									</div>
									<div class="box-body big">
										<div class="rows btn-toolbar">
                                            <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หลังบ้าน 1</div>
                                                <input  class="col-lg-12  col-md-7 col-sm-12 col-xs-7" type="checkbox" name="b1" checked data-on-text="เปิด">
                                            </div>

											<div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12 hidden-lg hidden-sm">&nbsp;</div>
                                            
                                            <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หลังบ้าน 2</div>
                                                <input  class="col-lg-12  col-md-7 col-sm-12 col-xs-7" type="checkbox" name="b2" checked data-on-text="เปิด">
                                            </div>
                                            
                                          <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12">&nbsp;</div>
                                            
                                           <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หลังบ้าน 3</div>
                                                <input  class="col-lg-12  col-md-7 col-sm-12 col-xs-7" type="checkbox" name="b3" checked data-on-text="เปิด">
                                            </div>
                                            
                                            <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12 hidden-lg hidden-sm">&nbsp;</div>
                                            
                                            <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หลังบ้าน 4</div>
                                                <input  class="col-lg-12  col-md-7 col-sm-12 col-xs-7" type="checkbox" name="b4" checked data-on-text="เปิด">
                                            </div>
                                            
											<!-- 
                                           <div class="row col-lg-12 hidden-lg hidden-sm">&nbsp;</div>
                                            
                                           <div class="col-lg-6 col-md-12 col-sm-6 col-xs-12">
                                            	<div class="col-lg-12  col-md-5 col-sm-12 col-xs-5">หน้าบ้าน 4</div>
                                                <div class="col-lg-12  col-md-7 col-sm-12 col-xs-7">
                                                    <input type="checkbox" name="my-checkbox" checked>
                                                </div>   
                                            </div>-->
                                            
                                        </div>  
									</div>
								</div>
								<!-- /BADGES -->
							</div>
						</div>
					
					</div><!-- /CONTENT-->
				</div>
			</div>
		</div>
	</section>
	<!--/PAGE -->

	<script src="jquery-ui-1.10.3.custom.min.js"></script>
	<script src="bootstrap.min.js"></script>
	<script src="bootstrap-switch.js"></script>
	<script type="text/javascript" src="slimScrollHorizontal.min.js"></script>
	<script type="text/javascript" src="jquery.blockUI.min.js"></script>
    <script type="text/javascript" src="jquery.cookie.min.js"></script>
	<script src="script.js"></script>
	<script>
		jQuery(document).ready(function() {		
			App.init(); //Initialise plugins and elements
			$("input[type=checkbox]").bootstrapSwitch();

		});
		
		$(document).ready(function(){		
			$('input[name="f1"]').on('switchChange.bootstrapSwitch', function(event, state) {
			   // console.log(this); // DOM element
			  //console.log(event); // jQuery event
			  //console.log(state); // true | false
			  
			  	var btnstate = (state) ? "1" : "0";
				
				if(state)
				{
					$(".bootstrap-switch-id-f1").find(".bootstrap-switch-label").html("<i class='fa fa-lightbulb-o fa-lg text-warning' style='text-shadow: 0 -5px 5px yellow;'></i>");
					//$(this).attr("data-label-text","<i class='fa fa-lightbulb-o fa-lg text-warning' style='text-shadow: 0 -5px 5px yellow;'></i>");
				}
				else
				{
					//alert("1111111");
					$(".bootstrap-switch-id-f1").find(".bootstrap-switch-label").html("<i class='fa fa-lightbulb-o fa-lg'></i>");
					//$(this).find(".bootstrap-switch-label").html("<i class='fa fa-lightbulb-o fa-lg'></i>");
					//$(this).setTextLabel  = ;
				}
				//alert(btnstate);
				message = new Paho.MQTT.Message(btnstate);
    			message.destinationName = "bedroom/switch/light";
    			client.send(message); 
			});
		});
	</script>
	<!-- /JAVASCRIPTS -->
</body>
</html>